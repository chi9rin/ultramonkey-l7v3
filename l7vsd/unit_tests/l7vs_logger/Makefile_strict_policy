TARGET	= strict_policy_test
INCDIR	= ../parameter_stub/
SRCDIR	= ../../l7vsd/logger/
CC	= g++
CFLAGS	= -O0 -g -Wall -Werror -pthread 
LD	= g++
LIBS	= -L/usr/lib64 -lrt -llog4cxx -ldl
LDFLAGS	= 
PARAMETERDIR	= ../parameter_stub
PARAMETER	= $(PARAMETERDIR)/parameter.a

SRCS	= \
	  strict_policy_test.cpp 

.SUFFIXES: .cpp .o
.cpp.o:
	$(CC) $(CFLAGS) -I./ -I/usr/include/apr-1/ -I$(INCDIR) -I$(SRCDIR) -c $< -o $@

OBJS	= $(SRCS:.cpp=.o)

all:	$(TARGET)

$(TARGET): $(OBJS) $(PARAMETER)
	$(LD) $(LDFLAGS) $(LIBS) -o $(TARGET) $(OBJS) $(PARAMETER) /usr/lib64/libboost_unit_test_framework.a

$(PARAMETER):
	$(MAKE) -C $(PARAMETERDIR)

strict_policy_test.o: $(SRCDIR)strict_time_based_rolling_policy.cpp

clean:
	rm -f $(TARGET) *.o
	$(MAKE) -C $(PARAMETERDIR) clean
